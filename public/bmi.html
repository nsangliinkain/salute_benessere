<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcola BMI</title>
    <script src="/js/app.js"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header id="header"></header>
    <div class="intro-text">
        <h2>Cos'√©</h2>
        <p>Il Body Mass Index (BMI), anche detto Indice di Massa Corporea (IMC), √® il parametro pi√π utilizzato per valutare l'entit√† del peso corporeo dei soggetti adulti non sportivi.</p>
        <p>Il BMI mette in relazione, con una semplice formula matematica, la statura con il peso della persona.</p>
        <p>Il Body Mass Index si ottiene dividendo il peso espresso in chilogrammi (kg) con la statura espressa in metri elevata al quadrato.</p>
        <p>Il risultato di tale formula classifica il soggetto in un'area che pu√≤ essere: sottopeso (di vario grado), normopeso, sovrappeso, obesit√† (di vario grado)</p>
        <table>
            <tr>
                <th>BMI</th>
                <th>Categoria</th>
            </tr>
            <tr>
                <td>Minore di 16.5</td>
                <td>Grave Magrezza</td>
            </tr>
            <tr>
                <td>16.5 - 18.49</td>
                <td>Sottopeso</td>
            </tr>
            <tr>
                <td>18.5 - 24.99</td>
                <td>Normopeso</td>
            </tr>
            <tr>
                <td>25 - 29.99</td>
                <td>Sovrappeso</td>
            </tr>
            <tr>
                <td>30 - 34.99</td>
                <td>Obesit√† di I grado</td>
            </tr>
            <tr>
                <td>35 - 39.99</td>
                <td>Obesit√† di II grado</td>
            </tr>
            <tr>
                <td>Maggiore di 40</td>
                <td>Obesit√† di III grado</td>
            </tr>
        </table>
    </div>
    <section class="bmi-calcolatore">
        <h2>üßÆ Calcola il tuo BMI</h2>
        <form id="bmi-form">
            <label for="altezza">Altezza (cm):</label>
            <input type="number" id="altezza" min="0" required>
        
            <label for="peso">Peso (kg):</label>
            <input type="number" id="peso" min="0" required>
        
            <button type="submit">Calcola</button>
        </form>
        <div id="risultato-bmi" class="risultato"></div>
    </section>
    <script>
        document.getElementById("bmi-form").addEventListener("submit", async function (e) {
        e.preventDefault();
    
        const altezza = parseFloat(document.getElementById("altezza").value);
        const peso = parseFloat(document.getElementById("peso").value);
    
        try {
            const response = await fetch("http://localhost:3000/calcola-bmi", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ altezza, peso })
            });
    
            const dati = await response.json();
    
            if (response.ok) {
            document.getElementById("risultato-bmi").innerHTML =
                `Il tuo BMI √® <strong>${dati.bmi}</strong> ‚Äì ${dati.categoria}`;
            } else {
            document.getElementById("risultato-bmi").textContent = dati.errore;
            }
        } catch (err) {
            document.getElementById("risultato-bmi").textContent = "Errore nel calcolo.";
            console.error(err);
        }
        });
    </script>
    <footer id="footer"></footer>
</body>
</html>