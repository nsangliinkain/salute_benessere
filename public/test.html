<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test del Benessere</title>
    <script src="/js/app.js"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header id="header"></header>
    <form id="test-benessere">
        <h2>Test sul tuo benessere psicofisico</h2>
      
        <label>1. Ti prendi cura concretamente della tua salute?</label>
        <select name="q1" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="1">Mai / Raramente</option>
            <option value="2">A volte</option>
            <option value="3">Spesso / Sempre</option>
        </select>
      
        <label>2. Segui un programma di allenamento specifico per mantenerti in forma?</label>
        <select name="q2" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="1">Mai / Raramente</option>
            <option value="2">A volte</option>
            <option value="3">Spesso / Sempre</option>
        </select>
      
        <label>3. Ti senti spesso stanco?</label>
        <select name="q3" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Sì</option>
            <option value="2">A volte</option>
            <option value="1">Raramente / Mai</option>
        </select>
      
        <label>4. Sei arrabbiato, triste o stufo?</label>
        <select name="q4" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Spesso</option>
            <option value="2">A volte</option>
            <option value="1">Raramente / Mai</option>
        </select>
      
        <label>5. Ti senti sotto stress e sopraffatto dalle cose della vita?</label>
        <select name="q5" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Spesso</option>
            <option value="2">A volte</option>
            <option value="1">Raramente / Mai</option>
        </select>
      
        <label>6. Mangi per nervosismo, solitudine o noia?</label>
        <select name="q6" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Spesso</option>
            <option value="2">A volte</option>
            <option value="1">Mai / Raramente</option>
        </select>
      
        <label>7. Ti muovi e sei attivo nella tua vita quotidiana?</label>
        <select name="q7" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="1">Mai / Raramente</option>
            <option value="2">A volte</option>
            <option value="3">Spesso / Sempre</option>
        </select>
      
        <label>8. Ritieni di dormire bene e di essere riposato?</label>
        <select name="q8" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="1">No</option>
            <option value="2">A volte</option>
            <option value="3">Sì</option>
        </select>
      
        <label>9. Investi denaro e tempo su te stesso, sulla tua salute e crescita personale?</label>
        <select name="q9" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="1">No</option>
            <option value="2">Qualche volta</option>
            <option value="3">Sì</option>
        </select>
      
        <label>10. Ti senti in stallo nel tuo percorso di vita?</label>
        <select name="q10" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Sì</option>
            <option value="2">A volte</option>
            <option value="1">No</option>
        </select>
      
        <label>11. Senti che vorresti fare di più per migliorare la tua salute e la tua vita?</label>
        <select name="q11" required>
            <option value="" disabled selected hidden>-- Seleziona una risposta --</option>
            <option value="3">Sì</option>
            <option value="2">Forse</option>
            <option value="1">No</option>
        </select>
      
        <br><br>
        <button type="submit">Invia e visualizza il tuo profilo benessere</button>
      </form>      
      <div id="risultato-benessere" style="margin-top: 20px;"></div>
      <script>
          document.getElementById("test-benessere").addEventListener("submit", async function (e) {
                e.preventDefault(); //non ricarica la pagina dopo l'invio del form
                const formData = new FormData(this); //crea un oggetto FormData con i dati del form
                const dati = {}; //crea un oggetto vuoto per memorizzare i dati
                formData.forEach((valore, chiave) => dati[chiave] = valore);
            
                const res = await fetch("http://localhost:3000/test-benessere", { //invio dei dati al server
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(dati)
                });
            
                const json = await res.json(); //aspetta la risposta dal server in formato JSON
                //mostra il risultato del test
                document.getElementById("risultato-benessere").innerHTML =
                    `<h3>Punteggio: ${json.punteggio}/33</h3><p>${json.messaggio}</p>`;
                });
      </script>      
    <footer id="footer"></footer>
</body>
</html>